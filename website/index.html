<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>DNSMegaTool</title>
</head>
<body>
    <h1>DNSMegaTool</h1>

    <input type="text" id="domainInput" placeholder="Enter domain">
    <button onclick="fetchDnsData()">Check DNS</button>

    <h2>Result:</h2>
    <table border="1" id="dnsTable"></table>

    <script>
        async function fetchDnsData() {
            const domain = document.getElementById("domainInput").value;
            if (!domain) {
                alert("Please enter a domain");
                return;
            }

            try {
                const response = await fetch(`https://fa-jv-dnsmegatoolapi.azurewebsites.net/api/function_app?domain=${encodeURIComponent(domain)}`);
                const data = await response.json();
                renderDnsTable(data);
            } catch (err) {
                console.error(err);
                alert("Failed to fetch DNS data.");
            }
        }

        function renderDnsTable(data) {
            const table = document.getElementById("dnsTable");
            table.innerHTML = "";

            const rows = [
                { label: "MX", value: data.MX.join("<br>") },
                { label: "SPF", value: data.SPF.join("<br>") },
                { label: "DKIM", value: data.DKIM.record.join("<br>") },
                { label: "DMARC", value: data.DMARC.join("<br>") },
                { label: "MTA-STS", value: data.MTA_STS.join("<br>") },
                { label: "DNSSEC", value: data.DNSSEC ? "Enabled" : "Disabled" },
                { label: "DS", value: data.DS.join("<br>") }
            ];

            rows.forEach(row => {
                const tr = document.createElement("tr");
                tr.innerHTML = `<td><b>${row.label}</b></td><td>${row.value}</td>`;
                table.appendChild(tr);
            });
        }
    </script>
</body>
</html>
